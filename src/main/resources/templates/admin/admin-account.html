<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
<meta charset="utf-8">
<title>Products - Softy Bakery</title>
<th:block th:insert="~{layout :: css-link}"></th:block>
</head>
<body ng-app="app" ng-controller="AdminAccountController">
	<div th:insert="~{layout :: spinner}"></div>
	<div th:insert="~{layout :: topbar}"></div>
<<<<<<< HEAD
	<div th:insert="~{layout :: navbar}"></div>
=======
	<div th:insert="~{layout :: adminNavbar}"></div>
>>>>>>> 9107b44f7865bc2b6c0edeecd1263c5b8a424223
	<!-- Page Header Start -->
	<div class="container-fluid page-header py-6 wow fadeIn"
		data-wow-delay="0.1s">
		<div class="container text-center pt-5 pb-3">
			<h1 class="display-4 text-white animated slideInDown mb-3">Products</h1>
			<nav aria-label="breadcrumb animated slideInDown">
				<ol class="breadcrumb justify-content-center mb-0">
					<li class="breadcrumb-item"><a class="text-white" href="#">Home</a>
					</li>
					<li class="breadcrumb-item"><a class="text-white" href="#">Pages</a>
					</li>
					<li class="breadcrumb-item text-primary active" aria-current="page">Products</li>
				</ol>
			</nav>
		</div>
	</div>
	<!-- Page Header End -->
	<!-- Admin Product Start -->
	<div class="mx-5">
		<div class="mb-3 d-flex">
			<div class="me-5" style="width: 250px;">
				<select class="form-select" id="filterOptions" ng-model="filterOptions">
					<option value="all">Find all</option>
					<option value="activity">Activity</option>
					<option value="blocker">Blocker</option>
				</select>
			</div>
<<<<<<< HEAD
			<!-- <div class="row">
				<select class="form-select" id="editRole" name="editRole" ng-model="form.role" ng-init="form.role = 'ALL'" style="width: 300px;"  required>
					<option value="ALL">All</option>
					<option value="USER">User</option>
					<option value="MANAGER">Manager</option>
					<option value="ADMIN">Admin</option>
					<option value="SUPERADMIN">Super Admin</option>
				</select>
			</div> -->
=======
>>>>>>> 9107b44f7865bc2b6c0edeecd1263c5b8a424223
			<form class="d-flex" role="search" style="width: 700px;">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" ng-model="temporarySearchText">
				<button class="btn btn-outline-success" type="submit" ng-click="search()">Search</button>
			</form>
		</div>
<div class="row">
	<div class="col-md-8">
            <table class="table table-hover table-bordered">
                <thead>
                    <tr class="bg-primary text-white">
                        <th>Username</th>
						<th>Image</th>
						<th>Email</th>
						<th>Fullname</th>
						<th>Address</th>
						<th>PhoneNumber</th>
                        <th>Condition</th>
						<th>Role</th>
						<th>Manipulate</th>
						
						  
                    </tr>
                </thead>
                <tbody>	
					<tr ng-repeat="a in filteredAccounts = (accounts | filter:searchText) | filter:filterCondition">
                        <td>{{a.account.username}}</td>
						<td><img src="../images/accountPhoto/{{a.account.photo}}" width="50px"></td>
						<td>{{a.account.email}}</td>
                        <td>{{a.account.fullName}}</td>
                        <td>{{a.account.addressDetail}} {{a.account.address}}</td>
                        <td>{{a.account.phoneNumber}}</td>
                        <td class="text-center " ng-class="{'text-danger': a.account.banned, 'text-success': !a.account.banned}">
							{{a.account.banned ? 'Locked' : 'Unlocked'}}
						</td>
						<td class="text-center ">{{a.account.role}}</td>
                        <td class="text-center ">
							<button type="button" class="btn btn-lg-square btn-outline-light rounded-circle m-auto" ng-click="editAccount(a)">
								<i class="bi bi-pencil-square text-primary"></i>
							</button>
						</td>
					</tr>	   
                </tbody>
            </table>
		</div>
		<div class="col-md-4">
			<form id="editUserForm">
				<div class="mb-3">
					<label class="form-label" for="editPhoto">Photo:</label>
					<div>
						<img ng-src="{{getRelativeImagePath(form.photo)}}" width="100px" ng-show="form.photo" />
						<input type="file" id="editPhoto" name="editPhoto" ng-model="form.photo" accept="image/*" style="margin-top: 10px;" onchange="angular.element(this).scope().handleFileSelect(this)">

				</div>
				
				<div class="mb-3">
					<label class="form-label" for="editUsername">Username:</label>
					<input type="text" class="form-control" id="editUsername" name="editUsername" ng-model="form.username" required>
				</div>
		
				<div class="mb-3">
					<label class="form-label" for="editEmail">Email:</label>
					<input type="email" class="form-control" id="editEmail" name="editEmail" ng-model="form.email" required>
				</div>
		
				<div class="mb-3">
					<label class="form-label" for="editAddress">Address:</label>
					<input type="text" class="form-control" id="editAddress" name="editAddress" ng-model="form.address" required>
				</div>
				<div class="mb-3">
					<label class="form-label" for="editAddress">Address Detail:</label>
					<input type="text" class="form-control" id="editAddress" name="editAddress" ng-model="form.addressDetail" required>
				</div>
		
				<div class="mb-3">
					<label class="form-label" for="editPhoneNumber">Phone Number:</label>
					<input type="tel" class="form-control" id="editPhoneNumber" name="editPhoneNumber" ng-model="form.phoneNumber" required>
				</div>
				<div class="mb-3">
					<label class="form-label" for="editRole">Role:</label>
					<select class="form-select" id="editRole" name="editRole" ng-model="form.role" ng-init="form.role = 'USER'" style="width: 300px;"  required>
						<option value="USER">User</option>
						<option value="MANAGER">Manager</option>
						<option value="ADMIN">Admin</option>
						<option value="SUPERADMIN">Super Admin</option>
					</select>
				</div>
				<div class="mb-3">
					<label class="form-label">Condition:</label><br>
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="editCondition" id="editActivity" ng-model="form.condition" value="activity" ng-init="form.condition = form.condition || 'activity'" checked>
						<label class="form-check-label" for="editActivity">Activity</label>
					</div>
				
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="editCondition" id="editBlocker" ng-model="form.condition" value="blocker">
						<label class="form-check-label" for="editBlocker">Blocker</label>
					</div>
				</div>
		
				<div id="editReasonBlockerContainer" ng-show="form.condition === 'blocker'">
					<div class="mb-3">
						<label class="form-label" for="editReasonBlocker">Reason Blocker:</label>
						<textarea class="form-control" id="editReasonBlocker" name="editReasonBlocker" ng-model="form.reasonBanned"></textarea>
					</div>
				</div>
		
				<div class="d-flex justify-content-center text-center">
					<button ng-click="update()" class="btn btn-outline-success m-2" style="width: 120px;">Save</button>
					<button ng-click="delete(form.username)" class="btn btn-outline-danger m-2" style="width: 120px;">Delete</button>
					<button ng-click="reset()" class="btn btn-outline-warning m-2" style="width: 120px;">Reset</button>
				</div>
			</form>
		</div>
		</div>
		<!-- Modal -->

  
    </div>
	<div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
		  <div class="modal-content">
			<div class="modal-header">
			  <h5 class="modal-title" id="messageModalLabel">Thông báo</h5>
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			  </button>
			</div>
			<div class="modal-body">
			  <p>{{modalMessage }}</p>
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
			</div>
		  </div>
		</div>
	  </div>
	<!-- Admin Product End -->
	<div th:insert="~{layout :: footer}"></div>
	<div th:insert="~{layout :: copyright}"></div>
	<div th:insert="~{layout :: backtotop}"></div>
	<div th:insert="~{layout :: js-link}"></div>
	<script>
		// JavaScript to toggle Reason Blocker input based on Condition selection
		document.getElementById('userForm').addEventListener('change', function(event) {
			if (event.target.name === 'condition') {
				const reasonBlockerContainer = document.getElementById('reasonBlockerContainer');
				const reasonBlockerInput = document.getElementById('reasonBlocker');
	
				if (event.target.value === 'blocker') {
					reasonBlockerContainer.style.display = 'block';
					reasonBlockerInput.setAttribute('required', 'required');
				} else {
					reasonBlockerContainer.style.display = 'none';
					reasonBlockerInput.removeAttribute('required');
				}
			}
		});
	</script>
</body>
</html>