<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
<meta charset="utf-8">
<title>Products - Softy Bakery</title>
<th:block th:insert="~{layout :: css-link}"></th:block>
</head>
<body ng-app="app" ng-controller="AdminAccountController">
	<div th:insert="~{layout :: spinner}"></div>
	<div th:insert="~{layout :: topbar}"></div>
	<div th:insert="~{layout :: adminNavbar}"></div>
	<!-- Page Header Start -->
	<div class="container-fluid page-header py-6 wow fadeIn"
		data-wow-delay="0.1s">
		<div class="container text-center pt-5 pb-3">
			<h1 class="display-4 text-white animated slideInDown mb-3">Products</h1>
			<nav aria-label="breadcrumb animated slideInDown">
				<ol class="breadcrumb justify-content-center mb-0">
					<li class="breadcrumb-item"><a class="text-white" href="#">Home</a>
					</li>
					<li class="breadcrumb-item"><a class="text-white" href="#">Pages</a>
					</li>
					<li class="breadcrumb-item text-primary active" aria-current="page">Products</li>
				</ol>
			</nav>
		</div>
	</div>
	<!-- Page Header End -->
	<!-- Admin Product Start -->
	<div class="mx-5">
		<div class="mb-3 d-flex">
			<div class="me-5" style="width: 250px;">
				<select class="form-select" id="filterOptions" ng-model="filterOptions">
					<option value="all">Find all</option>
					<option value="activity">Activity</option>
					<option value="blocker">Blocker</option>
				</select>
			</div>
			<form class="d-flex" role="search" style="width: 700px;">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" ng-model="temporarySearchText">
				<button class="btn btn-outline-success" type="submit" ng-click="search()">Search</button>
			</form>
		</div>
<div class="row">
	<div class="col-md-8">
            <table class="table table-hover table-bordered">
                <thead>
                    <tr class="bg-primary text-white">
                        <th>Username</th>
						<th>Email</th>
						<th>Fullname</th>
						<th>Address</th>
						<th>PhoneNumber</th>
                        <th>Condition</th>
						<th>Manipulate</th>   
                    </tr>
                </thead>
                <tbody>	
					<tr ng-repeat="a in filteredAccounts = (accounts | filter:searchText) | filter:filterCondition">
                        <td>{{a.account.username}}</td>
						<td>{{a.account.email}}</td>
                        <td>{{a.account.fullName}}</td>
                        <td>{{a.account.address}}</td>
                        <td>{{a.account.phoneNumber}}</td>
                        <td class="text-center " ng-class="{'text-danger': a.account.banned, 'text-success': !a.account.banned}">
							{{a.account.banned ? 'Locked' : 'Unlocked'}}
						</td>
                        <td class="text-center ">
							<button type="button" class="btn btn-lg-square btn-outline-light rounded-circle m-auto" ng-click="">
								<i class="bi bi-pencil-square text-primary"></i>
							</button>
						</td>
					</tr>	   
                </tbody>
            </table>
		</div>
		<div class="col-md-4">
			<form id="userForm">
				<div class="mb-3">
					<label class="form-label" for="username">Username:</label>
					<input type="text" class="form-control" id="username" name="username" required>
				</div>
				
				<div class="mb-3">
					<label class="form-label" for="email">Email:</label>
					<input type="email" class="form-control" id="email" name="email" required>
				</div>
				
				<div class="mb-3">
					<label class="form-label" for="address">Address:</label>
					<input type="text" class="form-control" id="address" name="address" required>
				</div>
				
				<div class="mb-3">
					<label class="form-label" for="phoneNumber">Phone Number:</label>
					<input type="tel" class="form-control" id="phoneNumber" name="phoneNumber" required>
				</div>
				
				<div class="mb-3">
					<label class="form-label">Condition:</label><br>
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="condition" id="activity" value="activity" checked>
						<label class="form-check-label" for="activity">Activity</label>
					</div>
					
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="condition" id="blocker" value="blocker">
						<label class="form-check-label" for="blocker">Blocker</label>
					</div>
				</div>
				
				<div id="reasonBlockerContainer" style="display:none;">
					<div class="mb-3">
						<label class="form-label" for="reasonBlocker">Reason Blocker:</label>
						<textarea class="form-control" id="reasonBlocker" name="reasonBlocker"></textarea>
					</div>
				</div>
				<div class="d-flex justify-content-center text-center">
		                <button ng-click="save('update')" class="btn btn-outline-success m-2" style="width: 120px;">Update</button>
		                <button ng-click="delete(form.productId)" class="btn btn-outline-danger m-2" style="width: 120px;">Delete</button>
		                <button ng-click="reset()" class="btn btn-outline-warning m-2" style="width: 120px;">Reset</button>
				</div>
			</form>
		</div>
		</div>
    </div>
	<!-- Admin Product End -->
	<div th:insert="~{layout :: footer}"></div>
	<div th:insert="~{layout :: copyright}"></div>
	<div th:insert="~{layout :: backtotop}"></div>
	<div th:insert="~{layout :: js-link}"></div>
	<script>
		// JavaScript to toggle Reason Blocker input based on Condition selection
		document.getElementById('userForm').addEventListener('change', function(event) {
			if (event.target.name === 'condition') {
				const reasonBlockerContainer = document.getElementById('reasonBlockerContainer');
				const reasonBlockerInput = document.getElementById('reasonBlocker');
	
				if (event.target.value === 'blocker') {
					reasonBlockerContainer.style.display = 'block';
					reasonBlockerInput.setAttribute('required', 'required');
				} else {
					reasonBlockerContainer.style.display = 'none';
					reasonBlockerInput.removeAttribute('required');
				}
			}
		});
	</script>
</body>
</html>